package com.werner.config;import org.apache.activemq.ActiveMQConnectionFactory;import org.apache.activemq.command.ActiveMQQueue;import org.apache.activemq.command.ActiveMQTopic;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.jms.config.DefaultJmsListenerContainerFactory;import org.springframework.jms.config.JmsListenerContainerFactory;import org.springframework.jms.core.JmsMessagingTemplate;import javax.jms.Queue;import javax.jms.Topic;@Configurationpublic class ActiveMqConfig {    @Bean    public Queue getQueue() {        return new ActiveMQQueue("werner.queue");    }    @Bean    public Topic getTopic() {        return new ActiveMQTopic("werner.topic");    }    @Bean    public ActiveMQConnectionFactory connectionFactory() {        return new ActiveMQConnectionFactory("admin", "admin123", "tcp://localhost:61616");    }    /**     * 连接工厂     * @param connectionFactory     * @return     */    @Bean    public JmsListenerContainerFactory<?> jmsListenerContainerTopic(ActiveMQConnectionFactory connectionFactory) {        DefaultJmsListenerContainerFactory bean = new DefaultJmsListenerContainerFactory();        //默认为queue模式所以要配置为true开启topic        bean.setPubSubDomain(true);        bean.setConnectionFactory(connectionFactory);        return bean;    }    @Bean    public JmsListenerContainerFactory<?> jmsListenerContainerQueue(ActiveMQConnectionFactory connectionFactory) {        DefaultJmsListenerContainerFactory bean = new DefaultJmsListenerContainerFactory();        bean.setConnectionFactory(connectionFactory);        return bean;    }    /**     * 创建链接     * @param connectionFactory     * @return     */    @Bean    public JmsMessagingTemplate jmsMessagingTemplate(ActiveMQConnectionFactory connectionFactory) {        return new JmsMessagingTemplate(connectionFactory);    }}